{% extends 'base.html' %}

{% block content %}
<script>
   
$(document).on("click", "#likesButton", function(){
    var token = '{{csrf_token}}';
    alert("test");
    var name = document.getElementById("id");
    var bugName = name.firstChild.nodeValue;
    console.log(bugName);
        $.ajax({
            type: 'GET',
            url: "{% url 'likes' %}"
          })
          .done(function(data) {
              if(data.success) {
                  $("#likesButton").fadeOut(100).fadeIn(100);
                  alert(data.success);
              } else 
              { 
                alert("fail");
              }
          });
});
   

</script>
<div class="row row-flex">
    
    <div class="container">
        <h1>All Bugs</h1>
        <div class="instructions">
            For Bugs, you can only vote for each bug once and not your own.
        </div>
        <div><button ><a href="add">Add a bug</a></button></div>
        </br>
        {% for bug in bugs %}
            <div class="col-xs-10 col-xs-offset-1 col-sm-offset-0 col-sm-6 col-md-4 display panel">
                
                <div class="panel-body">
                    <h3 class="panel-heading panel-primary"> Name: <span id= bugName, data={{ bug.name }} > {{ bug.name }} </span></h3>
                    <h2 class="panel-title "> <strong>Status :</strong> {{ bug.get_status_display }}</h2><br>
                    <p id="id"><strong>ID:</strong> {{ bug.id }}</p>
                    <p id="created_date"><strong>Creation date:</strong> {{ bug.created_date }}</p>
                    <p><strong>Author:</strong> {{ bug.author }}</p>
                    <p class="product-description"><strong>Description:</strong>{{ bug.description|truncatewords:7  }}</p>
                    <p class="badge badge-primary"><span class="glyphicon glyphicon-star" aria-hidden="true">{{ bug.vote }}</span></p><br>
                    <a class="btn btn-primary" role="button" href="{% url 'viewbug' bug.id %}">view for {{ bug.id }}</a>
                    
                </div>
            </div>
    {% endfor %}
    </div>
</div>
{% endblock %}

